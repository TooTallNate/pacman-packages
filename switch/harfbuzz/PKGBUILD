# Maintainer:  Mary Strodl <ipadlover8322@gmail.com>

pkgname=switch-harfbuzz
pkgver=8.3.0
pkgrel=1
pkgdesc='HarfBuzz is a text shaping library. Using the HarfBuzz library allows programs to convert a sequence of Unicode input into properly formatted and positioned glyph outputâ€”for any writing system and language.'
arch=('any')
url='https://harfbuzz.github.io/'
license=(LGPL)
options=(!strip libtool staticlibs)
source=("https://github.com/harfbuzz/harfbuzz/releases/download/$pkgver/harfbuzz-$pkgver.tar.xz")
sha256sums=(
  '109501eaeb8bde3eadb25fab4164e993fbace29c3d775bcaa1c1e58e2f15f847'
)
makedepends=('switch-pkg-config' 'switch-cmake' 'switch-freetype' 'switch-cairo')
depends=('switch-freetype' 'switch-cairo')

groups=('switch-portlibs')

build() {

  source "${DEVKITPRO}/switchvars.sh"
  cd harfbuzz-${pkgver}

  source "${DEVKITPRO}/switchvars.sh"

  ./configure --prefix=${PORTLIBS_PREFIX} --host=aarch64-none-elf --disable-shared --enable-static

  make
}

package() {

  cd harfbuzz-${pkgver}
  make install DESTDIR="${pkgdir}"
  rm -fr ${pkgdir}/${PORTLIBS_PREFIX}/share

}
